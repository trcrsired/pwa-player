<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <!-- Light mode -->
        <meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">

        <!-- Dark mode -->
        <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000000">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    	<meta name="msvalidate.01" content="0EBF88DA5B81674DD7E39378483EC964" />
    	<title>PWA Player</title>
        <link rel="icon" href="/icons/icon.webp" />
        <link rel="manifest" href="/manifest.json">
        <link rel="stylesheet" href="/style.css">
        <link rel="stylesheet" href="/settings.css">
    </head>
    <body>
        <div id="playerContainer">
            <div id="playerWrapper">
                <video id="player" autoplay></video>
            </div>

                <!-- Config Menu Panel -->
            <div id="controls">

                <!-- Row 1: Playback & Timeline -->
                <div class="control-row">
                    <div class="control-group left-controls">
                        <button id="prevBtn" title="Previous Track">‚èÆÔ∏è</button>
                        <button id="playBtn" title="Play">‚ñ∂Ô∏è</button>
                        <button id="stopBtn" title="Stop">‚èπÔ∏è</button>
                        <button id="nextBtn" title="Next Track">‚è≠Ô∏è</button>
                        <button id="playModeBtn" title="Playback Mode">üîÄ</button>
                    </div>

                    <div class="control-group right-controls">
                        <button id="volumeToggle" title="Toggle Volume">üîä</button>
                        <input type="range" id="volumeSlider" min="0" max="100" value="100" title="Adjust Volume" />
                        <button id="fullscreenBtn" title="Toggle Fullscreen">‚õ∂</button>
                    </div>
                </div>

                <!-- Row 2: File & Web -->
                <div class="control-row">
                    <div class="control-group left-controls">
                        <button id="pickerBtn" title="Pick a File">üìÅ</button>
                        <button id="webBtn" title="Open Web View">üåç</button>
                        <button id="burgerBtn" title="Open Settings">‚ò∞</button>
                    </div>

                    <div class="control-group right-controls">
                        <button id="rotationBtn" title="Rotate View">üîÅ</button>
                        <span id="timeDisplay" title="Current Time / Total Duration">00:00 / 00:00</span>
                    </div>
                </div>

                <div class="control-row config-row" id="configOptions">
                    <div class="control-group full-width">
                        <button class="config-item" id="nowPlayingBtn" title="Now Playing">‚ñ∂Ô∏è Now Playing</button>
                        <button class="config-item" id="playlistBtn" title="Playlist">üéµ Playlist</button>
                        <button class="config-item" id="storageBtn" title="Storage">üóÇÔ∏è Storage</button>
                        <button class="config-item" id="settingsBtn" title="Settings">‚öôÔ∏è Settings</button>
                        <!--button class="config-item" id="aboutBtn" title="About">‚ÑπÔ∏è About</button-->
                    </div>
                </div>
                <input type="range" id="progressBar" min="0" max="100" value="0" title="Seek Timeline" />
            </div>

        </div>

        <div id="storageView" class="overlay-view hidden">
            <header class="topbar">
                <button id="backBtn" class="back-btn">‚Üê</button>
                <h1 class="title">Storage Manager</h1>
            </header>

            <main class="content">
                <section class="actions">
                    <button id="addImportBtn" class="btn primary">Import Directory</button>
                    <button id="addFilesBtn" class="btn primary">Import Files</button>
                    <input id="filePicker" type="file" multiple webkitdirectory directory style="display:none">
                    <!--button id="addExternalBtn" class="btn primary">Add External Directory</button-->
                    <button id="clearImports" class="btn danger">Clear All Imports</button>
                </section>
                <ul id="storageList" class="list"></ul>
            </main>
        </div>
        <div id="nowPlayingView" class="overlay-view hidden">
            <header class="topbar">
                <button id="nowPlayingBackBtn" class="back-btn">‚Üê</button>
                <h1 class="title">Now Playing</h1>
            </header>

            <main class="content">
                <!-- Current playing track info -->
                <section id="nowPlayingInfo" class="now-playing-info">
                    <div class="track-title">No track playing</div>
                    <div class="track-artist"></div>
                    <div class="track-url"></div>
                </section>

                <!-- Progress + time -->
                <section class="progress-section">
                    <span id="npTimeDisplay" title="Current Time / Total Duration">00:00 / 00:00</span>
                    <input type="range" id="npProgressBar" min="0" max="100" value="0" title="Seek Timeline" />
                    <button id="npVolumeToggle" title="Toggle Volume">üîä</button>
                    <input type="range" id="npVolumeSlider" min="0" max="100" value="100" title="Adjust Volume" />
                </section>

                <!-- Playback controls -->
                <section class="np-controls">
                    <button id="npPrevBtn" title="Previous Track">‚èÆÔ∏è</button>
                    <button id="npPlayBtn" title="Play">‚ñ∂Ô∏è</button>
                    <button id="npStopBtn" title="Stop">‚èπÔ∏è</button>
                    <button id="npNextBtn" title="Next Track">‚è≠Ô∏è</button>
                    <button id="npPlayModeBtn" title="Playback Mode">üîÄ</button>
                </section>

                <!-- Playback queue -->
                <ul id="nowPlayingQueue" class="list"></ul>
            </main>
        </div>

        <div id="playlistView" class="overlay-view hidden">
            <header class="topbar">
                <button id="playlistBackBtn" class="back-btn">‚Üê</button>
                <h1 class="title">Playlists</h1>
            </header>

            <main class="content">
                <button id="newPlaylistBtn" class="new-playlist-btn">+</button>
                <ul id="playlistTree" class="playlist-tree"></ul>
            </main>
        </div>
        <div id="settingsView" class="overlay-view hidden">
            <header class="topbar">
                <button id="settingsCloseBtn" class="back-btn">‚Üê</button>
                <h1 class="title">Settings</span>
            </header>

            <main class="content">

                <h3>About This App</h3>

                <p class="storage-description">
                    This app works best in modern Chromium-based browsers. The user prefers Microsoft Edge, which fully supports the File System Access API. Firefox and Safari do not support this API, so they are not recommended for importing or managing local media files.
                </p>

                <ul class="overlay-list">
                    <li>
                        <strong>Source Code:</strong><br>
                        <a href="https://github.com/trcrsired/pwa-player" target="_blank">
                            https://github.com/trcrsired/pwa-player
                        </a>
                    </li>

                    <li>
                        <strong>License:</strong><br>
                        GPLv3 ‚Äî Free Software Foundation
                    </li>

                    <li>
                        <strong>Organization:</strong><br>
                        cppfastio
                    </li>

                    <li>
                        <strong>Year:</strong><br>
                        <span id="settingsYear"></span>
                    </li>

                    <li>
                        <strong>PWA Store Listing:</strong><br>
                        <a href="https://pwa-store-7x5.pages.dev" target="_blank">
                            https://pwa-store-7x5.pages.dev
                        </a>
                    </li>
                </ul>

            </div>
        </div>

        <script src="indexeddb.js"></script>
        <script src="nowplaying.js"></script>
        <script src="playlist.js"></script>
        <script src="storage.js"></script>
        <script src="player.js"></script>
        <script src="settings.js"></script>
        <script src="sw-register.js"></script>
    </body>
</html>
